# IOI 2011 Day 2

https://oj.uz/problem/view/IOI11_crocodile

## 1. Crocodile's Underground City

Simplifying the problem down, we must find a DAG such that the outdegree of every non-exit node is $2$ (unless there is some isolated cycle, but without loss of generality assume there isn't one). We want to find a valid DAG such that the longest path is minimum.

It turns out we can do this with a modification of Dijkstra. We start from the exit nodes, and we define $dist[i]$ as the minimum longest path starting from $i$ in a valid DAG. For a given node $i$, $dist[i]$ is the second-smallest $dist[j]$ for all nodes $j$ adjacent to $i$, so store two minimums for each $i$ and update accordingly. 

An interesting caveat (oj.uz subtask 3 test case 22):

Normal Dijkstra uses a line like: <i>if (cur.f != dist[cur.s]) {continue;}</i><br>
But this line may run twice if the two minimums are the same, meaning that one of its children may be updated twice from the same node, which means there are two directed edges connecting the same pair of nodes, which doesn't follow the constraints of the escape plan. So we make sure to only consider each node only one time with a visited array.