# USACO Gold 2021 Feb

## 1. Stone Game
Let the initial amount of stones Bessie removes be $x$. Now define $b_i=\lfloor{a_i/x}\rfloor$. Removing $x$ stones from a pile is the same as subtracting $1$ from any pile. Then, the losing state is if all unique $b_i$ occur an even number of times. We can say that Bessie can mirror Elsie's moves, and thus Elsie will never win. The inverse is also true, where if some $b_i$ occurs an odd number of times, then Elsie can just remove the entirety of one of those piles on her first move, and now Bessie is in the losing position because all remaining unique $b_i$ have even frequency. 

Therefore, we are just to count the number of pairs $(i,x)$ such that after calculating all $b$ values by utilizing $a$ and $x$, and subtracting $1$ from $b_i$, all frequencies are even. Go through each $x$ and calculate the frequency and parity of each possible $b_i$ value (with prefix sums, as all numbers in the range $(vx,(v+1)x-1)$ produce a $b_i$ value of $v$). Some basic casework now suffices to determine the piles that Bessie can remove from to guarantee a win. In total, the time complexity is $O(N+(\max{a_i})log(\max{a_i}))$.

The casework: if there is only one $b_i$ with an odd frequency, then it must be $1$. Otherwise, subtracting $1$ displaces some other $b_i$ value and makes it odd. Also, if there's two $b_i$ with odd frequency, then they must be one apart. This is because you can subtract $1$ from the larger $b_i$ and make both values even. In any other case, there are no piles that Bessie can remove from in order to win.

## 2. Modern Art 3
There's a couple ways to solve it, and out of the ones I've seen I have the worst solution. I would definitely check out the [USACO guide solution](https://usaco.guide/problems/usaco-1114-modern-art-3/solution), which is a more optimized version of mine, and the [official editorial](https://usaco.org/current/data/sol_prob2_gold_feb21.html) which uses a completely different strategy.

Let $dp[l][r]$ be the minimum amount of strokes for the range $[l,r]$. First, we can express $dp[l][r]$ as the sum of two ranges $[l,k]$ and $[k+1,r]$. Second, we can extend by one unit to the left, so we're transitioning from $dp[l+1][r]$. We don't gain a stroke if $c_l=c_l+1$ or $c_l=c_r$, because we can just combine this cell into that stroke. Otherwise, we gain a stroke. So $dp[l][r]=dp[l+1][r]+(0/1)$. We can also extend one unit to the right, so by similar logic $dp[l][r]=dp[l][r-1]+(0/1)$. This solution is correct because we will consider all stroke possibilities one way or another in our dp (as we will try to pair up all pairs of cells with the same color), and because we never create an impossible sequence of strokes. It runs in $O(N^3)$.