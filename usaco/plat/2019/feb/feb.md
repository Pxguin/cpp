# USACO Platinum 2019 February

## 2. Mooriokart
We are given $K$ of disjoint trees and need to select one path from each tree such that the sum of the paths is $\ge Y-KX$. After calculating the lengths of all paths, a simple knapsack dp runs in $O(NY^2)$ if we group paths by length and also compress all paths $\ge Y-KX$ into one dp state. At the end, multiply by $(K-1)!$ because we are arranging the order of the tracks in a circle. Also, multiply by $2^{K-1}$ because each path in every tree can be traversed both ways. It should be $2^K$, but we must divide by $2$ to avoid over-counting because tracks can be traversed in both directions.

Improving the algorithm relies on the fact that there aren't that many distinct path lengths. It is most unoptimal to split into ${N\over{\sqrt{Y}}}$ trees of size $\sqrt{Y}$, so each tree has at most $Y$ distinct path lengths. Thus, the runtime is $O({N\over{\sqrt{Y}}}Y^2)$, or $O(NY\sqrt{Y})$ which proves to be an accurate representation of the time complexity.